# 관계 데이터베이스

- 관계 데이터 모델이란
    
    1970년 IBM의 E. F. Codd에 의해 관계 데이터 모델이 탄생
    
    - 관계 데이터 모델의 특성
        - 수학에서의 relation 과 set 이론에서 기초
        - 일반 사용자 기준 table 의 형태이다
            - 통상적인 테이블과는 사뭇 다름
            - table의 colum → field/item 이 관계 데이터 모델의 attribute 속성
            - table의 row → record 가 관계 데이터 모델의 tuple 객체
    
    ex) 학생 테이블 : relation
    
    ![Untitled](%E1%84%80%E1%85%AA%E1%86%AB%E1%84%80%E1%85%A8%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%E1%84%87%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%208618465fca2743738ef318335bf42d13/Untitled.png)
    
- Attribute & Domain
    - table 은 relation과 유사하다
    - domain
        - attribute가 취할 수 있는 값들의 집합
    - attribute
        - domain의 역할의 이름
        - 한 relation 내에서 attribute의 이름들은 모두 달라야 한다
    - 단순 도메인
        
        → 단순 애트리뷰트 : 원자값
        
    - 복합 도메인
        
        → 복합 애트리뷰트 : 복합값 ex) 날짜:<년,월,일>
        
    
    <aside>
    💡 애트리뷰트 이름과 도메인 이름은 같을 수 있다
    
    </aside>
    
- Relation
    - 예시 → **Student Relation 정의**
        
        ```sql
        DCL DOMAIN DSNO INTEGER; 
        DCL DOMAIN NAME CHAR(10); 
        DCL DOMAIN DYEAR INTEGER; 
        DCL DOMAIN DEPT CHAR(6); 
        DCL RELATION STUDENT
        	(Sno DOMAIN DSNO, 
        	Sname DOMAIN NAME, 
        	Year DOMAIN DYEAR, 
        	Dept DOMAIN DEPT);
        ```
        
        도메인 생략시 Student Relation
        
        ```sql
        DCL RELATION STUDENT
        	(Sno INTEGER,
        	Sname CHAR(10), 
        	Year INTEGER,
        	Dept CHAR(6));
        ```
        
        ![Untitled](%E1%84%80%E1%85%AA%E1%86%AB%E1%84%80%E1%85%A8%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%E1%84%87%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%208618465fca2743738ef318335bf42d13/Untitled%201.png)
        
    - Relation Schema
        - 릴레이션 내포(intension) or 릴레이션 스킴이라 한다
            - 릴레이션 이름 + 애트리뷰트 이름
        - 정적 성질을 띈다
            - 시간에 무관
            - 릴레이션 타입과 같은 의미이다
    - Relation Instance
        - 릴레이션 외연(extension) 이라 한다.
        - Relation R의 인스턴스
            - 어느 한 시점에 릴레이션 R이 포함하고 있는 투플들의 집합
            - 릴레이션의 내용, 상태, snapshot
        - 투플 : {(attr1 = V1, attr2 = V2, ''', attrn = Vn)}
        - 동적 성질
            - 삽입, 삭제 갱신으로 시간에 따라 변한다
            - 릴레이션의 값
    - Relation R
        - 수학적 정의
            - 카티션 프로덕트의 부분집합
            - 투플의 수 : 카디널리티
        - 개념적 정의
            - 릴레이션 스키마 + 릴레이션 인스턴스
- Relation의 특성
    - 투플의 유일성
        - 릴레이션 = 투플들의 집합
    - 투플의 무순서성
        - 릴레이션 : 추상적 개념 ≤ 투플들의 집합
        - 테이블 : 구체적 개념
    - 애트리뷰트의 무순수성
        - 릴레이션 스티마 → 애트리뷰트들의 집합
        - 투플 쌍들의 집합
    - 애트리뷰트의 원자성
        - 애트리뷰트 값은 원자 값 → 분해 불가능
        - 정규화 릴레이션
            - 애트리뷰트 값으로 원자값만 허용됨
            - 비정규화 릴레이션은 분해를 통해 정규화
            - 동등한 의미를 유지한다
        - 널값 또한 원자값
        - 도메인
            - 단순 도메인
            - 복합 도메인 → 값을 하나의 단위로 취급
- 관계 데이터베이스의 개념
    - 관계 데이터베이스
        - 테이블들의 집합
        - 데이터베이스를 시간에 따라 그 내용이 변할 수 있는 테이블의 형태로 표현
    - 관계 데이터베이스 스키마 → {릴레이션 스티마 + 무결성 제약조선}
    - 관계 데이터 모델 ↔  프로그래밍 시스템
        - 릴레이션 ↔  파일
        - 투플 ↔  레코드
        - 애트리뷰트 ↔  필드
    
    <aside>
    💡 관계 데이터베이스라고 할 때 데이터가 물리적 테이블 형태로 저장된다는 것을 의미하지는 않는다.
    
    </aside>
    
- 데이터베이스 key
    - key
        - 각 투플을 유일하게 식별 할 수 있는 애트리뷰트 집합
    - 후보키
        - Relation에 대한 애트리뷰트 집합, K 로 다음 두 성질을 만족
            - 유일성 → 각 투플에 대해 K의 값은 유일
            - 최소성 → K 는 각 투플을 유일하게 식별하는데 필요한 애트리뷰트만 포함
    - 슈퍼키
        - 유일성은 만족하지만, 최소성은 만족하지 않는 애트리뷰트
    - 기본키
        - 후보키 중에 지정된 키 → by 데이터베이스 설계자
        - 각 투플에 대해 항상 유효해야된다 (null 설정 안됨)
    - 대체키
        - 후보키 중에 기본키를 제외한 나머지 후보키
- Foreign key
    - 외래키
        - 릴레이션 R의 애트리뷰트 집합 FK가 릴레이션 S의 기본키 일 때 FK 는 R 의  외래키이다
        - FK의 도메인 = S의 기본키의 도메인
        - FK의 값은 S에 존재 혹은 null
        - R과 S가 같은 릴레이션 일 수 있다
        - R을 참조 릴레이션, S를 피참조 릴레이션 이라 한다
            - 릴레이션 R은 FK를 통해 릴레이션 S를 참조.
    - R ≠ S 일 경우
        
        교수 (교수번호, 교수이름, 학과번호, 직급)
        학과 (학과번호(PK), 학과이름, 학과장교수번호(FK), 학생수)
        학생 (학번, 이름, 학년, 학과)
        과목 (과목번호, 과목이름, 학점, 학과, 담당교수)
        등록 (학번(FK), 과목번호(FK), 성적)
        
    - R = S 인 경우
        
        교수1 (교수번호(PK), 교수이름, 학과번호, 학장교수번호(FK))
        
- 무결성 제약
    1. 개체 무결성
        1. 기본 키 값은 null을 가질 수 없다
        2. 정보 부재를 명시적으로 표현하는 특수한 데이터 값
            1. 알려지지 않은 값
            2. 해당 없음
    2. 참조 무결성
        1. 외래 키 값은 반드시 피참조 릴레이션의 기본 키 값이거나 null
    
    <aside>
    💡 이러한 무결성 제약조건은 데이터베이스 상태가 항상 만족시켜야 된다
    
    </aside>
    
    - 데이터베이스 상태 → 상태의 변화에도 항상 무결성 제약조건을 만족해야한다
        - 어느 한 시점에 데이터베이스에 저장되어 있는 모든 데이터 값(투플)
        - 데이터베이스 인스턴스
            - 데이터베이스 스키마에 포함되어 있는 모든 릴레이션들의 인스턴스 집합
        - 데이터베이스 상태의 계속적인 변화
            - 삽입, 삭제, 변경 연산